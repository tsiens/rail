{% extends 'template.html' %}
{% block content %}
    <br/>
    <div id="carousel" class="carousel slide" data-ride="carousel" style="height:300px">
        <!-- 指示符 -->
        <ul class="carousel-indicators">
        </ul>
        <!-- 轮播图片 -->
        <div class="carousel-inner">
        </div>
        <!-- 左右切换按钮 -->
        <a class="carousel-control-prev" href="#carousel" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#carousel" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>
    <div id="index_search" style="max-width: 500px;">
        <br/>
        <input class="search form-control" title="search">
        <div style="width: 100%;background-color: #FFF"></div>
        <br/>
        <button type="button" class="btn btn-secondary">手气不错</button>
    </div>
{% endblock %}
{% block script %}
    <script>
        $("a:contains('主页')").addClass('active');
        $.post('{% url 'data' %}', {'type': 'index_station'}, function (data) {
            $.each(data, function (n, station) {
                var li = $('<li>').attr({'ata-target': '#carousel', 'data-slide-to': n});
                var div = $('<div>').css('overflow', 'auto').addClass('carousel-item');
                var a = $('<a>').attr('href', '{% url 'station' '*' %}'.replace('*', station)).append($('<img>').css('height', '300px').attr({
                    'src': '{{ qiniu }}' + station + '{{ format }}',
                    'alt': station
                }).addClass('img-fluid img-thumbnail'));
                if (n === 0) {
                    li.addClass('active');
                    div.addClass('active')
                }
                div.append(a).append('<div class="carousel-caption"><strong>' + station + '</strong></div>');
                $('.carousel-indicators').append(li);
                $('.carousel-inner').append(div)
            })
        });
    </script>
{% endblock %}